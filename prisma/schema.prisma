generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model apartment_images {
  id           Int        @id @default(autoincrement())
  apartment_id Int
  image_url    String     @db.VarChar(500)
  deleted_by   Int        @default(0)
  is_deleted   Boolean    @default(false)
  is_default   Boolean    @default(false)
  is_active    Boolean    @default(true)
  deleted_at   DateTime?  @db.Timestamp(0)
  created_at   DateTime?  @default(now()) @db.Timestamp(0)
  updated_at   DateTime?  @default(now()) @db.Timestamp(0)
  apartments   apartments @relation(fields: [apartment_id], references: [id], onDelete: Cascade, map: "fk_apartment_images_apartments")

  @@index([apartment_id], map: "idx_apartment_id")
}

model apartment_zones {
  id            Int          @id @default(autoincrement())
  zone_name     String       @db.VarChar(255)
  address       String       @db.VarChar(255)
  scale         String?      @db.Text
  amenities     String?      @db.Text
  product_types String?      @db.Text
  deleted_by    Int          @default(0)
  is_deleted    Boolean      @default(false)
  is_default    Boolean      @default(false)
  is_active     Boolean      @default(true)
  deleted_at    DateTime?    @db.Timestamp(0)
  created_at    DateTime?    @default(now()) @db.Timestamp(0)
  updated_at    DateTime?    @default(now()) @db.Timestamp(0)
  apartments    apartments[]
}

model apartments {
  id                  Int                      @id @default(autoincrement())
  apartment_name      String?                  @db.VarChar(255)
  zone_id             Int
  apartment_type      String                   @db.VarChar(50)
  apartment_note      String?                  @db.VarChar(255)
  apartment_condition String                   @db.VarChar(255)
  business_type       apartments_business_type
  area_description    String                   @db.VarChar(100)
  rental_price        Decimal?                 @db.Decimal(15, 2)
  sale_price          Decimal?                 @db.Decimal(15, 2)
  direction           String?                  @db.VarChar(50)
  view_count          Int?                     @default(0)
  is_hot_deal         Boolean?                 @default(false)
  discount_rate       Decimal?                 @default(0.00) @db.Decimal(5, 2)
  deleted_by          Int                      @default(0)
  is_deleted          Boolean                  @default(false)
  is_default          Boolean                  @default(false)
  is_active           Boolean                  @default(true)
  deleted_at          DateTime?                @db.Timestamp(0)
  created_at          DateTime?                @default(now()) @db.Timestamp(0)
  updated_at          DateTime?                @default(now()) @db.Timestamp(0)
  apartment_images    apartment_images[]
  apartment_zones     apartment_zones          @relation(fields: [zone_id], references: [id], map: "fk_apartments_zones")

  @@index([zone_id], map: "idx_zone_id")
}

model articles {
  id         Int       @id @default(autoincrement())
  title      String?   @db.VarChar(255)
  content    String?   @db.Text
  image_url  String?   @db.VarChar(500)
  views      Int       @default(0)
  user_id    Int
  deleted_by Int       @default(0)
  is_deleted Boolean   @default(false)
  deleted_at DateTime? @db.Timestamp(0)
  created_at DateTime  @default(now()) @db.Timestamp(0)
  updated_at DateTime  @default(now()) @db.Timestamp(0)
}

model chat_group_members {
  id            Int          @id @default(autoincrement())
  user_id       Int?
  chat_group_id Int?
  deleted_by    Int          @default(0)
  is_deleted    Boolean      @default(false)
  deleted_at    DateTime?    @db.Timestamp(0)
  created_at    DateTime     @default(now()) @db.Timestamp(0)
  updated_at    DateTime     @default(now()) @db.Timestamp(0)
  chat_groups   chat_groups? @relation(fields: [chat_group_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_chat_group_members_group")
  users         users?       @relation(fields: [user_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_chat_group_members_user")

  @@index([chat_group_id], map: "idx_chat_group_id")
  @@index([user_id], map: "idx_user_id")
}

model chat_groups {
  id                 Int                  @id @default(autoincrement())
  key_for_chat_one   String?              @unique(map: "uniq_key_for_chat_one") @db.VarChar(255)
  name               String?              @db.VarChar(255)
  owner_id           Int?
  deleted_by         Int                  @default(0)
  is_deleted         Boolean              @default(false)
  deleted_at         DateTime?            @db.Timestamp(0)
  created_at         DateTime             @default(now()) @db.Timestamp(0)
  updated_at         DateTime             @default(now()) @db.Timestamp(0)
  chat_group_members chat_group_members[]
  users              users?               @relation(fields: [owner_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_chat_groups_owner")
  chat_messages      chat_messages[]

  @@index([owner_id], map: "idx_owner_id")
}

model chat_messages {
  id             Int         @id @default(autoincrement())
  chat_group_id  Int
  user_id_sender Int
  message_text   String?     @db.Text
  deleted_by     Int         @default(0)
  is_deleted     Boolean     @default(false)
  deleted_at     DateTime?   @db.Timestamp(0)
  created_at     DateTime    @default(now()) @db.Timestamp(0)
  updated_at     DateTime    @default(now()) @db.Timestamp(0)
  chat_groups    chat_groups @relation(fields: [chat_group_id], references: [id], onUpdate: Restrict, map: "fk_chat_messages_group")
  users          users       @relation(fields: [user_id_sender], references: [id], onUpdate: Restrict, map: "fk_chat_messages_sender")

  @@index([chat_group_id], map: "idx_chat_group_id")
  @@index([user_id_sender], map: "idx_user_id_sender")
}

model chats {
  id         Int       @id @default(autoincrement())
  message    String?   @db.Text
  user_id    Int
  room_id    String    @db.VarChar(255)
  deleted_by Int       @default(0)
  is_deleted Boolean   @default(false)
  deleted_at DateTime? @db.Timestamp(0)
  created_at DateTime  @default(now()) @db.Timestamp(0)
  updated_at DateTime  @default(now()) @db.Timestamp(0)
  users      users     @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "fk_chats_user")

  @@index([user_id], map: "idx_user_id")
}

model permissions {
  id              Int               @id @default(autoincrement())
  name            String            @db.VarChar(255)
  endpoint        String            @db.VarChar(255)
  method          String            @db.VarChar(100)
  module          String            @db.VarChar(100)
  deleted_by      Int               @default(0)
  is_deleted      Boolean           @default(false)
  deleted_at      DateTime?         @db.Timestamp(0)
  created_at      DateTime          @default(now()) @db.Timestamp(0)
  updated_at      DateTime          @default(now()) @db.Timestamp(0)
  role_permission role_permission[]
}

model role_permission {
  id            Int         @id @default(autoincrement())
  role_id       Int
  permission_id Int
  is_active     Boolean?    @default(true)
  deleted_by    Int         @default(0)
  is_deleted    Boolean     @default(false)
  deleted_at    DateTime?   @db.Timestamp(0)
  created_at    DateTime    @default(now()) @db.Timestamp(0)
  updated_at    DateTime    @default(now()) @db.Timestamp(0)
  permissions   permissions @relation(fields: [permission_id], references: [id], onUpdate: Restrict, map: "fk_role_permission_permission")
  roles         roles       @relation(fields: [role_id], references: [id], onUpdate: Restrict, map: "fk_role_permission_role")

  @@index([permission_id], map: "idx_permission_id")
  @@index([role_id], map: "idx_role_id")
}

model roles {
  id              Int               @id @default(autoincrement())
  name            String?           @db.VarChar(255)
  description     String?           @db.VarChar(255)
  is_active       Boolean?          @default(true)
  deleted_by      Int               @default(0)
  is_deleted      Boolean           @default(false)
  deleted_at      DateTime?         @db.Timestamp(0)
  created_at      DateTime          @default(now()) @db.Timestamp(0)
  updated_at      DateTime          @default(now()) @db.Timestamp(0)
  role_permission role_permission[]
  users           users[]
}

model users {
  id                 Int                  @id @default(autoincrement())
  email              String               @unique(map: "uniq_email") @db.VarChar(255)
  full_name          String?              @db.VarChar(255)
  avatar             String?              @db.VarChar(255)
  password           String?              @db.VarChar(255)
  facebook_id        String?              @unique(map: "uniq_facebook_id") @db.VarChar(255)
  google_id          String?              @unique(map: "uniq_google_id") @db.VarChar(255)
  role_id            Int                  @default(2)
  totp_secret        String?              @db.VarChar(255)
  deleted_by         Int                  @default(0)
  is_deleted         Boolean              @default(false)
  deleted_at         DateTime?            @db.Timestamp(0)
  created_at         DateTime             @default(now()) @db.Timestamp(0)
  updated_at         DateTime             @default(now()) @db.Timestamp(0)
  chat_group_members chat_group_members[]
  chat_groups        chat_groups[]
  chat_messages      chat_messages[]
  chats              chats[]
  roles              roles                @relation(fields: [role_id], references: [id], onUpdate: Restrict, map: "fk_users_role")

  @@index([role_id], map: "idx_role_id")
}

enum apartments_business_type {
  rent
  sale
}
